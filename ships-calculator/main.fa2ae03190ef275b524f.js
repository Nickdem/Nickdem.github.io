!function(e){function t(t){for(var r,l,o=t[0],a=t[1],c=t[2],f=0,h=[];f<o.length;f++)l=o[f],Object.prototype.hasOwnProperty.call(i,l)&&i[l]&&h.push(i[l][0]),i[l]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r]);for(u&&u(t);h.length;)h.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,o=1;o<n.length;o++){var a=n[o];0!==i[a]&&(r=!1)}r&&(s.splice(t--,1),e=l(l.s=n[0]))}return e}var r={},i={0:0},s=[];function l(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=r,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)l.d(n,r,function(t){return e[t]}.bind(null,r));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var o=window.webpackJsonp=window.webpackJsonp||[],a=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=a;s.push([121,1]),n()}({121:function(e,t,n){n(122),e.exports=n(309)},308:function(e,t,n){},309:function(e,t,n){"use strict";n.r(t);var r=document.querySelector(".ships"),i=document.querySelector(".calculatored__ships"),s=document.querySelector(".helper"),l=document.getElementById("sum");function o(e){s.innerText="",s.insertAdjacentHTML("beforeend",e),s.style.display="block",setTimeout((function(){return s.style.display="none"}),3e3)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t,n,r,i,s,l){try{var o=e[s](l),a=o.value}catch(e){return void n(e)}o.done?t(a):Promise.resolve(a).then(r,i)}function f(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=h(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,l=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){o=!0,s=e},f:function(){try{l||null==n.return||n.return()}finally{if(o)throw s}}}}function h(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}var m=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxLvl=42,this.limit=7,this.sum=0}var t,n,r;return t=e,(n=[{key:"checkLimitForShips",value:function(e){return e>=this.limit}},{key:"sumOfLevels",value:function(e){var t,n=this;this.sum=0,e.map((function(e){return n.sum+=+e})),t=this.sum,l.innerText=t}},{key:"checkLimitLevel",value:function(e){return this.sumOfLevels(e)>this.maxLvl}}])&&a(t.prototype,n),r&&a(t,r),e}()),g=new(function(){function e(){v(this,e),this.ships=[],this.$selectedShip=null,this.$selectedShips=null}return y(e,[{key:"levelsOfShips",value:function(){return this.ships.map((function(e){return e.dataset.level}))}},{key:"listersForShips",value:function(){var e=this;this.$selectedShips=document.querySelectorAll(".calculatored .ship");var t,n=f(this.$selectedShips);try{for(n.s();!(t=n.n()).done;){t.value.addEventListener("click",(function(t){e.ships=e.ships.filter((function(e){return e.dataset.name!=t.target.parentNode.dataset.name})),m.sumOfLevels(e.levelsOfShips()),e.$selectedShip=document.querySelector("div[data-name=".concat(t.target.parentNode.dataset.name,"]")),e.$selectedShip.classList.remove("select"),t.target.parentNode.remove()}))}}catch(e){n.e(e)}finally{n.f()}}},{key:"render",value:function(e,t){m.checkLimitForShips(this.ships.length)?console.log("максимум 7 корабликов"):(this.ships.push(this.$selectedShip),m.checkLimitLevel(this.levelsOfShips())?console.log("максимум 42 уровня"):(!function(e,t,n){e.style.position="absolute",e.style.left=t.toString()+"px",e.style.top=n.toString()+"px",i.appendChild(e),e.style.left=i.getBoundingClientRect().x+"px",e.style.top=i.getBoundingClientRect().bottom+"px",setTimeout((function(){e.style.transition="unset",e.style.left=0,e.style.top=0,e.style.position="relative"}),500)}(this.$selectedShip,e,t),this.listersForShips()))}}]),e}()),b=function(){function e(t){v(this,e),this.url=t,this.ships=[],this.$input=document.querySelector(".filter__input"),this.selects={},this.$allSelects=document.querySelectorAll(".filter__select"),this.filters={nation:"all-nations",type:"all-types",level:"all-levels"},this.toggle=!1}var t,n;return y(e,[{key:"fetchWSH",value:(t=regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(this.url);case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,e.next=9,n;case 9:this.ships=e.sent,this.render(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,this,[[0,13]])})),n=function(){var e=this,n=arguments;return new Promise((function(r,i){var s=t.apply(e,n);function l(e){u(s,r,i,l,o,"next",e)}function o(e){u(s,r,i,l,o,"throw",e)}l(void 0)}))},function(){return n.apply(this,arguments)})},{key:"giveMeSelects",value:function(){this.selects.nation=c(new Set(this.ships.map((function(e){return e.nation})))),this.selects.type=c(new Set(this.ships.map((function(e){return e.type})))),this.selects.level=c(new Set(this.ships.map((function(e){return e.level})))).sort((function(e,t){return e-t}));for(var e,t,n=0,r=Object.keys(this.selects);n<r.length;n++){var i=r[n];e=this.selects[i],t=i,document.querySelector("#".concat(t)).insertAdjacentHTML("beforeend",e.map((function(e){return'<option class="filter__option" value='.concat(e,">").concat(e,"</option>")})).join(""))}}},{key:"selectListeners",value:function(){var e,t=this,n=f(this.$allSelects);try{for(n.s();!(e=n.n()).done;){e.value.addEventListener("change",(function(e){var n=document.querySelectorAll(".ships .ship");t.filters[e.target.id]=e.target.value,t.$input.value="",t.search(""),t.toggle=!0;var r,i=f(n);try{for(i.s();!(r=i.n()).done;){var s=r.value;t.checkFilters(s)}}catch(e){i.e(e)}finally{i.f()}}))}}catch(e){n.e(e)}finally{n.f()}}},{key:"clickHandler",value:function(e){if(e.preventDefault(),"ship select"!==this.className)if(m.checkLimitForShips(g.ships.length))o("Достигнут лимит количества кораблей (максимум ".concat(m.limit,")"));else if(m.checkLimitLevel(g.levelsOfShips())||m.sum+ +this.dataset.level>m.maxLvl)o("Достигнут лимит уровней (максимум ".concat(m.maxLvl,")"));else{var t=this.cloneNode(!0),n=this.getBoundingClientRect().x;g.$selectedShip=t,g.render(n,e.pageY),this.className=this.className+" select"}else o("Корабль уже выбран")}},{key:"search",value:function(e){var t,n=f(this.toggle?document.querySelectorAll(".ships .ship:not(.none)"):document.querySelectorAll(".ships .ship"));try{for(n.s();!(t=n.n()).done;){var r=t.value;r.dataset.name.toLowerCase().includes(e.toLowerCase())?r.classList.remove("none"):r.classList.add("none")}}catch(e){n.e(e)}finally{n.f()}}},{key:"checkFilters",value:function(e){if("all-nations"==this.filters.nation&&"all-types"==this.filters.type&&"all-levels"==this.filters.level)return e.classList.remove("none"),void(this.toggle=!1);("all-levels"==this.filters.level||+e.dataset.level==+this.filters.level)&&("all-nations"==this.filters.nation||e.innerText.includes(this.filters.nation))&&("all-types"==this.filters.type||e.innerText.includes(this.filters.type))?e.classList.remove("none"):e.classList.add("none")}},{key:"render",value:function(){var e;e=this.ships,r.insertAdjacentHTML("beforeend",e.map((function(e){return'\n    <div class="ship" data-name='.concat((t=e).title.replace(/[\s.]/g,"")," data-level = ").concat(t.level,'>\n        <div class="info">').concat(t.nation," / ").concat(t.type,'</div>\n        <div class="name">').concat(t.level," ").concat(t.title,'</div>\n        <div class="wrapper"></div>\n    </div>\n  ');var t})).join("")),this.giveMeSelects();var t,n=f(document.querySelectorAll(".ship"));try{for(n.s();!(t=n.n()).done;){t.value.addEventListener("click",this.clickHandler)}}catch(e){n.e(e)}finally{n.f()}}},{key:"init",value:function(){var e=this;this.fetchWSH(),this.$input.addEventListener("input",(function(t){e.search(t.target.value)})),this.selectListeners()}}]),e}();n(308);new b("https://nickdem.github.io/warships/").init()}});